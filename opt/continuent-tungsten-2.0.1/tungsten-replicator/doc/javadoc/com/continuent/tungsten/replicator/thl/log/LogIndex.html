<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_51) on Wed Jul 03 10:36:58 BST 2013 -->
<TITLE>
LogIndex (Tungsten API)
</TITLE>

<META NAME="date" CONTENT="2013-07-03">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="LogIndex (Tungsten API)";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/LogIndex.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../../../com/continuent/tungsten/replicator/thl/log/LogFlushTask.html" title="class in com.continuent.tungsten.replicator.thl.log"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../../../com/continuent/tungsten/replicator/thl/log/LogIndexEntry.html" title="class in com.continuent.tungsten.replicator.thl.log"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../../../index.html?com/continuent/tungsten/replicator/thl/log/LogIndex.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="LogIndex.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
com.continuent.tungsten.replicator.thl.log</FONT>
<BR>
Class LogIndex</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../../../../../resources/inherit.gif" ALT="extended by "><B>com.continuent.tungsten.replicator.thl.log.LogIndex</B>
</PRE>
<HR>
<DL>
<DT><PRE>public class <B>LogIndex</B><DT>extends java.lang.Object</DL>
</PRE>

<P>
Implements an in-memory index showing the starting sequence number of each
 index file. Index operations are fully synchronized to ensure there are no
 issues due to concurrent access across threads.
<P>

<P>
<DL>
<DT><B>Version:</B></DT>
  <DD>1.0</DD>
<DT><B>Author:</B></DT>
  <DD><a href="mailto:stephane.giron@continuent.com">Stephane Giron</a></DD>
</DL>
<HR>

<P>

<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../../../../com/continuent/tungsten/replicator/thl/log/LogIndex.html#LogIndex(java.io.File, java.lang.String, long, int, boolean)">LogIndex</A></B>(java.io.File&nbsp;logDir,
         java.lang.String&nbsp;filePrefix,
         long&nbsp;retentionMillis,
         int&nbsp;bufferSize,
         boolean&nbsp;isWritable)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Creates a new in-memory instance on all log files in a particular
 directory.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../com/continuent/tungsten/replicator/thl/log/LogIndex.html#addNewFile(long, java.lang.String)">addNewFile</A></B>(long&nbsp;seqno,
           java.lang.String&nbsp;fileName)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Adds a new file to the index.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../com/continuent/tungsten/replicator/thl/log/LogIndex.html#fileNameExists(java.lang.String)">fileNameExists</A></B>(java.lang.String&nbsp;name)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns true if the name of a log file exists in the index.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../com/continuent/tungsten/replicator/thl/log/LogIndex.html#getActiveSeqno()">getActiveSeqno</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the current active sequence number.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../com/continuent/tungsten/replicator/thl/log/LogIndex.html#getFile(long)">getFile</A></B>(long&nbsp;seqno)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Locates and returns the file that contains a given sequence number.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../com/continuent/tungsten/replicator/thl/log/LogIndex.html#getFileNames()">getFileNames</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns an array containing all file names.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../com/continuent/tungsten/replicator/thl/log/LogIndex.html#getFirstFile()">getFirstFile</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the first index file or null if no such file exists.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.util.List&lt;<A HREF="../../../../../../com/continuent/tungsten/replicator/thl/log/LogIndexEntry.html" title="class in com.continuent.tungsten.replicator.thl.log">LogIndexEntry</A>&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../com/continuent/tungsten/replicator/thl/log/LogIndex.html#getIndexCopy()">getIndexCopy</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns a copy of the index entries in sorted order.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../com/continuent/tungsten/replicator/thl/log/LogIndex.html#getLastFile()">getLastFile</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the last index file or null if no such file exists.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../com/continuent/tungsten/replicator/thl/log/LogIndex.html#getMaxIndexedSeqno()">getMaxIndexedSeqno</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the maximum committed sequence number this index knows about.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../com/continuent/tungsten/replicator/thl/log/LogIndex.html#getMinIndexedSeqno()">getMinIndexedSeqno</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the minimum sequence number this index knows about.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../com/continuent/tungsten/replicator/thl/log/LogIndex.html#isEmpty()">isEmpty</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns true if the index is empty.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../com/continuent/tungsten/replicator/thl/log/LogIndex.html#release()">release</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Releases resources in the index.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../com/continuent/tungsten/replicator/thl/log/LogIndex.html#removeFile(java.lang.String)">removeFile</A></B>(java.lang.String&nbsp;fileName)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Remove a file from the index.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../com/continuent/tungsten/replicator/thl/log/LogIndex.html#setActiveSeqno(long)">setActiveSeqno</A></B>(long&nbsp;activeSeqno)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sets the active sequence number, which is the lowest sequence number
 known to be in use by clients of this log.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../com/continuent/tungsten/replicator/thl/log/LogIndex.html#setMaxIndexedSeqno(long)">setMaxIndexedSeqno</A></B>(long&nbsp;seqno)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sets the maximum sequence number this index knows about by updating the
 last index entry.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../com/continuent/tungsten/replicator/thl/log/LogIndex.html#size()">size</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the number of files in the index.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../com/continuent/tungsten/replicator/thl/log/LogIndex.html#toString()">toString</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../com/continuent/tungsten/replicator/thl/log/LogIndex.html#validate(java.io.File)">validate</A></B>(java.io.File&nbsp;logDir)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Validates the index by ensuring that each file exists and that the log
 entries have matching start and end dates.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.Object</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, finalize, getClass, hashCode, notify, notifyAll, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="LogIndex(java.io.File, java.lang.String, long, int, boolean)"><!-- --></A><H3>
LogIndex</H3>
<PRE>
public <B>LogIndex</B>(java.io.File&nbsp;logDir,
                java.lang.String&nbsp;filePrefix,
                long&nbsp;retentionMillis,
                int&nbsp;bufferSize,
                boolean&nbsp;isWritable)
         throws <A HREF="../../../../../../com/continuent/tungsten/replicator/ReplicatorException.html" title="class in com.continuent.tungsten.replicator">ReplicatorException</A>,
                java.lang.InterruptedException</PRE>
<DL>
<DD>Creates a new in-memory instance on all log files in a particular
 directory.
<P>
<DL>
<DT><B>Parameters:</B><DD><CODE>logDir</CODE> - Log directory<DD><CODE>filePrefix</CODE> - Prefix for log files<DD><CODE>retentionMillis</CODE> - Amount of time to retain log files before
            auto-deleting<DD><CODE>bufferSize</CODE> - Buffer size for reading log files<DD><CODE>isWritable</CODE> - True if the log is writable and we can clean up
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../../../com/continuent/tungsten/replicator/ReplicatorException.html" title="class in com.continuent.tungsten.replicator">ReplicatorException</A></CODE> - Thrown in the event of an error constructing
             the index
<DD><CODE>java.lang.InterruptedException</CODE></DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="getActiveSeqno()"><!-- --></A><H3>
getActiveSeqno</H3>
<PRE>
public long <B>getActiveSeqno</B>()</PRE>
<DL>
<DD>Returns the current active sequence number.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="setActiveSeqno(long)"><!-- --></A><H3>
setActiveSeqno</H3>
<PRE>
public void <B>setActiveSeqno</B>(long&nbsp;activeSeqno)</PRE>
<DL>
<DD>Sets the active sequence number, which is the lowest sequence number
 known to be in use by clients of this log. Log files can only be deleted
 if they are before this sequence number.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="isEmpty()"><!-- --></A><H3>
isEmpty</H3>
<PRE>
public boolean <B>isEmpty</B>()</PRE>
<DL>
<DD>Returns true if the index is empty.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="size()"><!-- --></A><H3>
size</H3>
<PRE>
public int <B>size</B>()</PRE>
<DL>
<DD>Returns the number of files in the index.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="release()"><!-- --></A><H3>
release</H3>
<PRE>
public void <B>release</B>()</PRE>
<DL>
<DD>Releases resources in the index.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="toString()"><!-- --></A><H3>
toString</H3>
<PRE>
public java.lang.String <B>toString</B>()</PRE>
<DL>
<DD>
<P>
<DD><DL>
<DT><B>Overrides:</B><DD><CODE>toString</CODE> in class <CODE>java.lang.Object</CODE></DL>
</DD>
<DD><DL>
<DT><B>See Also:</B><DD><CODE>Object.toString()</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="setMaxIndexedSeqno(long)"><!-- --></A><H3>
setMaxIndexedSeqno</H3>
<PRE>
public void <B>setMaxIndexedSeqno</B>(long&nbsp;seqno)</PRE>
<DL>
<DD>Sets the maximum sequence number this index knows about by updating the
 last index entry. This routine takes care of patching up the first index
 entry in a new log, which starts with the default value -1 until we find
 the correct sequence number.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getMaxIndexedSeqno()"><!-- --></A><H3>
getMaxIndexedSeqno</H3>
<PRE>
public long <B>getMaxIndexedSeqno</B>()</PRE>
<DL>
<DD>Returns the maximum committed sequence number this index knows about. If
 the currently open file does not have anything written to it, return the
 end value from the previous entry.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>-1 if index is empty, otherwise, return the max value</DL>
</DD>
</DL>
<HR>

<A NAME="getMinIndexedSeqno()"><!-- --></A><H3>
getMinIndexedSeqno</H3>
<PRE>
public long <B>getMinIndexedSeqno</B>()</PRE>
<DL>
<DD>Returns the minimum sequence number this index knows about. This number
 might not be committed if we are just writing a new log.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getFile(long)"><!-- --></A><H3>
getFile</H3>
<PRE>
public java.lang.String <B>getFile</B>(long&nbsp;seqno)</PRE>
<DL>
<DD>Locates and returns the file that contains a given sequence number. The
 implementation uses a linear search, so we assume this is a comparatively
 rare operation on connection startup.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="fileNameExists(java.lang.String)"><!-- --></A><H3>
fileNameExists</H3>
<PRE>
public boolean <B>fileNameExists</B>(java.lang.String&nbsp;name)</PRE>
<DL>
<DD>Returns true if the name of a log file exists in the index.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getIndexCopy()"><!-- --></A><H3>
getIndexCopy</H3>
<PRE>
public java.util.List&lt;<A HREF="../../../../../../com/continuent/tungsten/replicator/thl/log/LogIndexEntry.html" title="class in com.continuent.tungsten.replicator.thl.log">LogIndexEntry</A>&gt; <B>getIndexCopy</B>()</PRE>
<DL>
<DD>Returns a copy of the index entries in sorted order.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getFirstFile()"><!-- --></A><H3>
getFirstFile</H3>
<PRE>
public java.lang.String <B>getFirstFile</B>()</PRE>
<DL>
<DD>Returns the first index file or null if no such file exists.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getLastFile()"><!-- --></A><H3>
getLastFile</H3>
<PRE>
public java.lang.String <B>getLastFile</B>()</PRE>
<DL>
<DD>Returns the last index file or null if no such file exists.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getFileNames()"><!-- --></A><H3>
getFileNames</H3>
<PRE>
public java.lang.String[] <B>getFileNames</B>()</PRE>
<DL>
<DD>Returns an array containing all file names.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="addNewFile(long, java.lang.String)"><!-- --></A><H3>
addNewFile</H3>
<PRE>
public void <B>addNewFile</B>(long&nbsp;seqno,
                       java.lang.String&nbsp;fileName)</PRE>
<DL>
<DD>Adds a new file to the index.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>seqno</CODE> - Starting sequence number in the file<DD><CODE>fileName</CODE> - Name of the log file</DL>
</DD>
</DL>
<HR>

<A NAME="removeFile(java.lang.String)"><!-- --></A><H3>
removeFile</H3>
<PRE>
public void <B>removeFile</B>(java.lang.String&nbsp;fileName)</PRE>
<DL>
<DD>Remove a file from the index.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="validate(java.io.File)"><!-- --></A><H3>
validate</H3>
<PRE>
public void <B>validate</B>(java.io.File&nbsp;logDir)
              throws <A HREF="../../../../../../com/continuent/tungsten/replicator/thl/log/LogConsistencyException.html" title="class in com.continuent.tungsten.replicator.thl.log">LogConsistencyException</A></PRE>
<DL>
<DD>Validates the index by ensuring that each file exists and that the log
 entries have matching start and end dates.
<P>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../../../com/continuent/tungsten/replicator/thl/log/LogConsistencyException.html" title="class in com.continuent.tungsten.replicator.thl.log">LogConsistencyException</A></CODE></DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/LogIndex.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../../../com/continuent/tungsten/replicator/thl/log/LogFlushTask.html" title="class in com.continuent.tungsten.replicator.thl.log"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../../../com/continuent/tungsten/replicator/thl/log/LogIndexEntry.html" title="class in com.continuent.tungsten.replicator.thl.log"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../../../index.html?com/continuent/tungsten/replicator/thl/log/LogIndex.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="LogIndex.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
